<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lanou.mapper.ContractProductMapper">
	<cache /><!-- 开启二级缓存 -->
	<resultMap id="BaseResultMap" type="com.lanou.entity.ContractProduct">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Jan 08 
			14:47:56 CST 2018. -->
		<id column="CONTRACT_PRODUCT_ID" jdbcType="VARCHAR" property="CONTRACT_PRODUCT_ID" />
		<result column="CONTRACT_ID" jdbcType="VARCHAR" property="CONTRACT_ID" />
		<result column="FACTORY_ID" jdbcType="VARCHAR" property="FACTORY_ID" />
		<result column="FACTORY_NAME" jdbcType="VARCHAR" property="FACTORY_NAME" />
		<result column="PRODUCT_NO" jdbcType="VARCHAR" property="PRODUCT_NO" />
		<result column="PRODUCT_IMAGE" jdbcType="VARCHAR" property="PRODUCT_IMAGE" />
		<result column="PRODUCT_DESC" jdbcType="VARCHAR" property="PRODUCT_DESC" />
		<result column="CNUMBER" jdbcType="DECIMAL" property="CNUMBER" />
		<result column="OUT_NUMBER" jdbcType="DECIMAL" property="OUT_NUMBER" />
		<result column="LOADING_RATE" jdbcType="VARCHAR" property="LOADING_RATE" />
		<result column="BOX_NUM" jdbcType="DECIMAL" property="BOX_NUM" />
		<result column="PACKING_UNIT" jdbcType="VARCHAR" property="PACKING_UNIT" />
		<result column="PRICE" jdbcType="DECIMAL" property="PRICE" />
		<result column="AMOUNT" jdbcType="DECIMAL" property="AMOUNT" />
		<result column="FINISHED" jdbcType="DECIMAL" property="FINISHED" />
		<result column="EXTS" jdbcType="VARCHAR" property="EXTS" />
		<result column="ORDER_NO" jdbcType="DECIMAL" property="ORDER_NO" />
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Jan 08 
			14:47:56 CST 2018. -->
		CONTRACT_PRODUCT_ID, CONTRACT_ID, FACTORY_ID, FACTORY_NAME,
		PRODUCT_NO, PRODUCT_IMAGE,
		PRODUCT_DESC, CNUMBER, OUT_NUMBER,
		LOADING_RATE, BOX_NUM, PACKING_UNIT, PRICE,
		AMOUNT,
		FINISHED, EXTS,
		ORDER_NO
	</sql>
	<!-- ******************************************************************************************* -->
	
	<select id="selectByTen" resultType="com.lanou.bean.ContractProductBean">
		select t.*
		from (SELECT product_no, COUNT(*) AS countnum
		FROM contract_product_c
		GROUP BY product_no
		ORDER BY countnum DESC) t
		where rownum <![CDATA[<= ]]> 10
	</select>

	<!-- 根据合同id查询货物信息 -->
	<select id="selectProductByContractID" resultMap="BaseResultMap">
		select
		cp.*,fc.factory_name factoryName from CONTRACT_PRODUCT_C cp
		left join
		factory_c fc on cp.factory_id = fc.factory_id
		where cp.contract_id =
		#{contractId}
	</select>
	<!-- 添加货物 -->
	<insert id="insert" parameterType="com.lanou.entity.ContractProduct">
		insert into CONTRACT_PRODUCT_C
		(CONTRACT_PRODUCT_ID, CONTRACT_ID,
		FACTORY_ID, FACTORY_NAME,
		PRODUCT_NO,
		PRODUCT_IMAGE, PRODUCT_DESC, CNUMBER,
		OUT_NUMBER,
		LOADING_RATE, BOX_NUM,
		PACKING_UNIT, PRICE, AMOUNT,
		FINISHED, EXTS,
		ORDER_NO
		)
		values (#{CONTRACT_PRODUCT_ID,jdbcType=VARCHAR},
		#{CONTRACT_ID,jdbcType=VARCHAR},
		#{FACTORY_ID,jdbcType=VARCHAR},
		#{FACTORY_NAME,jdbcType=VARCHAR}, #{PRODUCT_NO,jdbcType=VARCHAR},
		#{PRODUCT_IMAGE,jdbcType=VARCHAR}, #{PRODUCT_DESC,jdbcType=VARCHAR},
		#{CNUMBER,jdbcType=DECIMAL},
		#{OUT_NUMBER,jdbcType=DECIMAL},
		#{LOADING_RATE,jdbcType=VARCHAR}, #{BOX_NUM,jdbcType=DECIMAL},
		#{PACKING_UNIT,jdbcType=VARCHAR}, #{PRICE,jdbcType=DECIMAL},
		#{AMOUNT,jdbcType=DECIMAL},
		#{FINISHED,jdbcType=DECIMAL},
		#{EXTS,jdbcType=VARCHAR}, #{ORDER_NO,jdbcType=DECIMAL}
		)
	</insert>
	<select id="selectAll" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List"></include>
		from CONTRACT_PRODUCT_C
	</select>
	<!-- 根据货物id查询货物 -->
	<select id="selectContractProductByProductId" parameterType="java.lang.String"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from CONTRACT_PRODUCT_C
		where CONTRACT_PRODUCT_ID =
		#{CONTRACT_PRODUCT_ID}
	</select>
	<!-- 根据id修改货物 -->
	<update id="updateContractProductByProductId" parameterType="com.lanou.entity.ContractProduct">
		update CONTRACT_PRODUCT_C
		<set>
			<if test="CONTRACT_ID != null">
				CONTRACT_ID = #{CONTRACT_ID,jdbcType=VARCHAR},
			</if>
			<if test="FACTORY_ID != null">
				FACTORY_ID = #{FACTORY_ID,jdbcType=VARCHAR},
			</if>
			<if test="FACTORY_NAME != null">
				FACTORY_NAME = #{FACTORY_NAME,jdbcType=VARCHAR},
			</if>
			<if test="PRODUCT_NO != null">
				PRODUCT_NO = #{PRODUCT_NO,jdbcType=VARCHAR},
			</if>
			<if test="PRODUCT_IMAGE != null">
				PRODUCT_IMAGE = #{PRODUCT_IMAGE,jdbcType=VARCHAR},
			</if>
			<if test="PRODUCT_DESC != null">
				PRODUCT_DESC = #{PRODUCT_DESC,jdbcType=VARCHAR},
			</if>
			<if test="CNUMBER != null">
				CNUMBER = #{CNUMBER,jdbcType=DECIMAL},
			</if>
			<if test="OUT_NUMBER != null">
				OUT_NUMBER = #{OUT_NUMBER,jdbcType=DECIMAL},
			</if>
			<if test="LOADING_RATE != null">
				LOADING_RATE = #{LOADING_RATE,jdbcType=VARCHAR},
			</if>
			<if test="BOX_NUM != null">
				BOX_NUM = #{BOX_NUM,jdbcType=DECIMAL},
			</if>
			<if test="PACKING_UNIT != null">
				PACKING_UNIT = #{PACKING_UNIT,jdbcType=VARCHAR},
			</if>
			<if test="PRICE != null">
				PRICE = #{PRICE,jdbcType=DECIMAL},
			</if>
			<if test="AMOUNT != null">
				AMOUNT = #{AMOUNT,jdbcType=DECIMAL},
			</if>
			<if test="FINISHED != null">
				FINISHED = #{FINISHED,jdbcType=DECIMAL},
			</if>
			<if test="EXTS != null">
				EXTS = #{EXTS,jdbcType=VARCHAR},
			</if>
			<if test="ORDER_NO != null">
				ORDER_NO = #{ORDER_NO,jdbcType=DECIMAL},
			</if>
		</set>
		where CONTRACT_PRODUCT_ID = #{CONTRACT_PRODUCT_ID,jdbcType=VARCHAR}
	</update>
	<!-- 根据id删除信息 -->
	<delete id="deleteContract_Product" parameterType="java.lang.String">
		delete from
		CONTRACT_PRODUCT_C
		where CONTRACT_PRODUCT_ID =
		#{CONTRACT_PRODUCT_ID,jdbcType=VARCHAR}
	</delete>

	<!-- ***************************************************************************************** -->
	<delete id="delete" parameterType="java.lang.String">
		delete from CONTRACT_PRODUCT_C
		where CONTRACT_PRODUCT_ID = #{CONTRACT_PRODUCT_ID,jdbcType=VARCHAR}
	</delete>


	<insert id="insertSelective" parameterType="com.lanou.entity.ContractProduct">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Jan 08 
			14:47:56 CST 2018. -->
		insert into CONTRACT_PRODUCT_C
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="CONTRACT_PRODUCT_ID != null">
				CONTRACT_PRODUCT_ID,
			</if>
			<if test="CONTRACT_ID != null">
				CONTRACT_ID,
			</if>
			<if test="FACTORY_ID != null">
				FACTORY_ID,
			</if>
			<if test="FACTORY_NAME != null">
				FACTORY_NAME,
			</if>
			<if test="PRODUCT_NO != null">
				PRODUCT_NO,
			</if>
			<if test="PRODUCT_IMAGE != null">
				PRODUCT_IMAGE,
			</if>
			<if test="PRODUCT_DESC != null">
				PRODUCT_DESC,
			</if>
			<if test="CNUMBER != null">
				CNUMBER,
			</if>
			<if test="OUT_NUMBER != null">
				OUT_NUMBER,
			</if>
			<if test="LOADING_RATE != null">
				LOADING_RATE,
			</if>
			<if test="BOX_NUM != null">
				BOX_NUM,
			</if>
			<if test="PACKING_UNIT != null">
				PACKING_UNIT,
			</if>
			<if test="PRICE != null">
				PRICE,
			</if>
			<if test="AMOUNT != null">
				AMOUNT,
			</if>
			<if test="FINISHED != null">
				FINISHED,
			</if>
			<if test="EXTS != null">
				EXTS,
			</if>
			<if test="ORDER_NO != null">
				ORDER_NO,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="CONTRACT_PRODUCT_ID != null">
				#{CONTRACT_PRODUCT_ID,jdbcType=VARCHAR},
			</if>
			<if test="CONTRACT_ID != null">
				#{CONTRACT_ID,jdbcType=VARCHAR},
			</if>
			<if test="FACTORY_ID != null">
				#{FACTORY_ID,jdbcType=VARCHAR},
			</if>
			<if test="FACTORY_NAME != null">
				#{FACTORY_NAME,jdbcType=VARCHAR},
			</if>
			<if test="PRODUCT_NO != null">
				#{PRODUCT_NO,jdbcType=VARCHAR},
			</if>
			<if test="PRODUCT_IMAGE != null">
				#{PRODUCT_IMAGE,jdbcType=VARCHAR},
			</if>
			<if test="PRODUCT_DESC != null">
				#{PRODUCT_DESC,jdbcType=VARCHAR},
			</if>
			<if test="CNUMBER != null">
				#{CNUMBER,jdbcType=DECIMAL},
			</if>
			<if test="OUT_NUMBER != null">
				#{OUT_NUMBER,jdbcType=DECIMAL},
			</if>
			<if test="LOADING_RATE != null">
				#{LOADING_RATE,jdbcType=VARCHAR},
			</if>
			<if test="BOX_NUM != null">
				#{BOX_NUM,jdbcType=DECIMAL},
			</if>
			<if test="PACKING_UNIT != null">
				#{PACKING_UNIT,jdbcType=VARCHAR},
			</if>
			<if test="PRICE != null">
				#{PRICE,jdbcType=DECIMAL},
			</if>
			<if test="AMOUNT != null">
				#{AMOUNT,jdbcType=DECIMAL},
			</if>
			<if test="FINISHED != null">
				#{FINISHED,jdbcType=DECIMAL},
			</if>
			<if test="EXTS != null">
				#{EXTS,jdbcType=VARCHAR},
			</if>
			<if test="ORDER_NO != null">
				#{ORDER_NO,jdbcType=DECIMAL},
			</if>
		</trim>
	</insert>

	<update id="updateByPrimaryKey" parameterType="com.lanou.entity.ContractProduct">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Mon Jan 08 
			14:47:56 CST 2018. -->
		update CONTRACT_PRODUCT_C
		set CONTRACT_ID =
		#{CONTRACT_ID,jdbcType=VARCHAR},
		FACTORY_ID =
		#{FACTORY_ID,jdbcType=VARCHAR},
		FACTORY_NAME =
		#{FACTORY_NAME,jdbcType=VARCHAR},
		PRODUCT_NO =
		#{PRODUCT_NO,jdbcType=VARCHAR},
		PRODUCT_IMAGE =
		#{PRODUCT_IMAGE,jdbcType=VARCHAR},
		PRODUCT_DESC =
		#{PRODUCT_DESC,jdbcType=VARCHAR},
		CNUMBER =
		#{CNUMBER,jdbcType=DECIMAL},
		OUT_NUMBER =
		#{OUT_NUMBER,jdbcType=DECIMAL},
		LOADING_RATE =
		#{LOADING_RATE,jdbcType=VARCHAR},
		BOX_NUM =
		#{BOX_NUM,jdbcType=DECIMAL},
		PACKING_UNIT =
		#{PACKING_UNIT,jdbcType=VARCHAR},
		PRICE = #{PRICE,jdbcType=DECIMAL},
		AMOUNT = #{AMOUNT,jdbcType=DECIMAL},
		FINISHED =
		#{FINISHED,jdbcType=DECIMAL},
		EXTS = #{EXTS,jdbcType=VARCHAR},
		ORDER_NO
		= #{ORDER_NO,jdbcType=DECIMAL}
		where CONTRACT_PRODUCT_ID =
		#{CONTRACT_PRODUCT_ID,jdbcType=VARCHAR}
	</update>
</mapper>